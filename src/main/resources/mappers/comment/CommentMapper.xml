<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.team.togethart.repository.comment.CommentMapper">

    <insert id="insertComment" parameterType="com.team.togethart.dto.comment.CommentAddRequest">
        INSERT INTO comment(
            comment_id,
            artwork_id,
            member_id,
            comment_content,
            c_upload_date,
            c_update_date,
            member_username
        )
        VALUES(
            DEFAULT,
            #{artworkId},
            #{memberId},
            #{commentContent},
            DEFAULT,
            DEFAULT,
            #{memberUsername}
        )
    </insert>

    <select id="selectCommentList" resultType="com.team.togethart.dto.comment.CommentViewResponse">
        SELECT c.memberUsername, c.cUploadDate, c.commentContent, m.member_image
          FROM comment c
         INNER JOIN member m
               ON c.member_id = m.member_id
         WHERE c.artwork_id = #{param1}
         ORDER BY c.cUploadDate
    </select>


</mapper>
